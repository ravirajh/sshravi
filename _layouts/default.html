<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>

    <!-- Tailwind CSS with Typography Plugin -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>

    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                fontFamily: {
                    sans: ['Inter', 'sans-serif'],
                },
                extend: {
                    colors: {
                        // Your custom grays are kept, but we will use 'black' utility for the bg
                        gray: {
                            900: '#111111', 
                            50: '#F9FAFB',
                        }
                    },
                    // Customizing typography for a tighter, resume-like feel
                    typography: (theme) => ({
                        DEFAULT: {
                            css: {
                                color: theme('colors.gray.700'),
                                maxWidth: 'none', // Allow container to control width
                                lineHeight: '1.6',
                                'h1': { fontSize: '2.25rem', fontWeight: '800', marginBottom: '0.5rem', marginTop: '0' },
                                'h2': { fontSize: '1.5rem', fontWeight: '700', marginTop: '1.5em', marginBottom: '0.75em', borderBottom: '1px solid #e5e7eb', paddingBottom: '0.25em' },
                                'h3': { fontSize: '1.125rem', fontWeight: '600', marginTop: '1.25em', marginBottom: '0.25em' },
                                'h4': { fontSize: '1rem', fontWeight: '600', marginTop: '1em' },
                                'ul': { paddingLeft: '1.25em', marginTop: '0.5em', marginBottom: '0.5em' },
                                'li': { marginTop: '0.25em', marginBottom: '0.25em' },
                                'p': { marginTop: '0.5em', marginBottom: '0.5em' },
                                a: {
                                    color: theme('colors.gray.900'),
                                    textDecoration: 'underline',
                                    textUnderlineOffset: '2px',
                                    '&:hover': { color: theme('colors.gray.600') },
                                },
                            },
                        },
                        // Dark mode adjustments
                        invert: {
                            css: {
                                color: theme('colors.gray.300'),
                                'h2': { borderColor: theme('colors.gray.800') }, // Darkened border for AMO contrast
                                a: {
                                    color: theme('colors.white'),
                                    '&:hover': { color: theme('colors.gray.300') },
                                },
                            },
                        },
                    }),
                }
            }
        }

        // Dark Mode Logic
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb { background: #333333; } /* Slightly darker thumb for AMOLED */

        /* Print Styles */
        @media print {
            body { background-color: white !important; color: black !important; }
            .no-print { display: none !important; }
            main { padding: 0 !important; margin: 0 !important; max-width: 100% !important; }
            .prose { max-width: 100% !important; }
            /* Reset dark mode styles in print */
            .dark .prose-invert { --tw-prose-body: #000 !important; --tw-prose-headings: #000 !important; --tw-prose-links: #000 !important; --tw-prose-bold: #000 !important; --tw-prose-counters: #000 !important; --tw-prose-bullets: #000 !important; --tw-prose-hr: #000 !important; --tw-prose-quotes: #000 !important; --tw-prose-quote-borders: #000 !important; --tw-prose-captions: #000 !important; --tw-prose-code: #000 !important; --tw-prose-pre-code: #000 !important; --tw-prose-pre-bg: #000 !important; --tw-prose-th-borders: #000 !important; --tw-prose-td-borders: #000 !important; }
        }
    </style>
</head>

<!-- Changed dark:bg-gray-900 to dark:bg-black for AMOLED Pitch Black -->
<body class="bg-white text-gray-900 dark:bg-black dark:text-gray-100 transition-colors duration-300 flex flex-col min-h-screen selection:bg-gray-200 dark:selection:bg-gray-800">

    <!-- Navigation -->
    <nav class="w-full max-w-3xl mx-auto px-6 py-8 flex justify-between items-center no-print">
        <a href="{{ site.baseurl }}/" class="font-bold text-lg tracking-tighter hover:opacity-70 transition-opacity">RH</a>

        <div class="flex items-center gap-6 text-sm font-medium text-gray-600 dark:text-gray-400">
            <a href="{{ site.baseurl }}/" class="hover:text-black dark:hover:text-white transition-colors">About</a>
            <a href="{{ site.baseurl }}/resume" class="hover:text-black dark:hover:text-white transition-colors">Resume</a>
            <a href="{{ site.baseurl }}/cheatsheet" class="hover:text-black dark:hover:text-white transition-colors">Cheatsheet</a>
            
            <!-- Theme Toggle -->
            <button id="theme-toggle" class="hover:text-black dark:hover:text-white transition-colors focus:outline-none" aria-label="Toggle Dark Mode">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 hidden dark:block">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 block dark:hidden">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
                </svg>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow w-full max-w-3xl mx-auto px-6 pt-4 pb-20 prose prose-sm prose-slate dark:prose-invert">
        {{ content }}
    </main>

    <!-- Footer -->
    <footer class="w-full max-w-3xl mx-auto px-6 py-10 border-t border-gray-100 dark:border-gray-800 flex flex-col md:flex-row justify-between items-center text-xs text-gray-400 no-print">
        <span>&copy; {{ site.time | date: '%Y' }} Raviraj Halarnekar</span>
        <div class="flex gap-4 mt-2 md:mt-0">
            <a href="https://github.com/{{ site.github_username }}" class="hover:text-gray-600 dark:hover:text-gray-200">GitHub</a>
            <a href="mailto:{{ site.email }}" class="hover:text-gray-600 dark:hover:text-gray-200">Email</a>
        </div>
    </footer>

    <script>
        const btn = document.getElementById('theme-toggle');
        const html = document.documentElement;
        btn.addEventListener('click', () => {
            html.classList.toggle('dark');
            localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
        });
    </script>
</body>
</html>
